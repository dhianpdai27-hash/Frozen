<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>POS MBOK SANI - MULTI CABANG</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @media print { .no-print { display: none !important; } .print-only { display: block !important; } }
        .print-only { display: none; }
        .page-content { max-height: 60vh; overflow-y: auto; padding-bottom: 100px; }
        body { font-size: 16px; background-color: #f8fafc; color: #1e293b; padding-bottom: 70px; }
        .nav-active { color: #2563eb; border-top: 3px solid #2563eb; background-color: #eff6ff; }
    </style>
</head>
<body class="font-sans">

<div class="max-w-md mx-auto no-print px-4 pt-4">
    <header class="flex justify-between items-center mb-4 bg-white p-4 rounded-2xl shadow-sm">
        <div>
            <h1 id="display-nama-toko" class="text-xl font-black text-blue-600 italic leading-none uppercase">MBOK SANI</h1>
            <p id="label-toko" class="text-[9px] font-bold text-gray-400 mt-1 uppercase tracking-widest"></p>
        </div>
        <div id="clock" class="text-[9px] font-mono text-gray-400 text-right"></div>
    </header>
    
    <div id="tab-jual" class="tab-item space-y-4">
        <div class="space-y-2">
            <input type="text" id="custName" placeholder="NAMA PEMBELI" class="w-full border-2 border-white p-3 rounded-xl outline-none focus:border-blue-500 font-black text-lg bg-white uppercase shadow-sm">
            <input type="text" id="custAddr" placeholder="ALAMAT/CATATAN" class="w-full border-2 border-white p-3 rounded-xl outline-none focus:border-blue-500 font-bold text-sm bg-white uppercase shadow-sm">
        </div>
        
        <div class="bg-white p-2 rounded-2xl shadow-sm border border-blue-50">
            <p class="text-[10px] font-black text-blue-400 mb-2 uppercase ml-2 mt-1">Katalog Produk:</p>
            <div id="check-produk" class="space-y-2 page-content pr-1"></div>
        </div>

        <div class="fixed bottom-20 left-0 right-0 px-4 max-w-md mx-auto">
            <div class="bg-blue-600 p-4 rounded-2xl shadow-xl flex justify-between items-center text-white mb-2">
                <span class="font-bold text-xs uppercase">Total:</span>
                <span class="font-black text-2xl">Rp <span id="total-tagihan">0</span></span>
            </div>
            <button onclick="simpanDanCetak()" class="w-full bg-slate-800 hover:bg-black text-white py-4 rounded-2xl font-black text-lg shadow-xl active:scale-95 transition">
                SIMPAN & CETAK NOTA
            </button>
        </div>
    </div>

    <div id="tab-laporan" class="tab-item hidden space-y-3 pb-20">
        <div class="grid grid-cols-2 gap-2 font-black text-center uppercase">
            <div class="bg-white p-4 rounded-2xl shadow">
                <p class="text-[9px] text-gray-400 mb-1">Piutang Cabang</p>
                <p id="stat-piutang" class="text-lg text-red-600">0</p>
            </div>
            <div class="bg-white p-4 rounded-2xl shadow">
                <p class="text-[9px] text-gray-400 mb-1">Laba Bersih</p>
                <p id="stat-laba" class="text-lg text-green-600">0</p>
            </div>
        </div>
        <div id="rekap-pelanggan" class="bg-amber-50 p-4 rounded-2xl border border-amber-100 hidden">
            <p class="text-[10px] font-black text-amber-700 uppercase mb-2">Tagihan Per Nama:</p>
            <div id="rekap-list" class="space-y-1 text-xs font-bold"></div>
        </div>
        <div class="bg-white rounded-2xl shadow-sm overflow-hidden">
            <table class="w-full text-[11px]">
                <thead class="bg-gray-50 font-black uppercase text-gray-400">
                    <tr><td class="p-3">Pelanggan</td><td class="p-3 text-right">Total</td><td class="p-3 text-center">Aksi</td></tr>
                </thead>
                <tbody id="histori-table" class="font-bold"></tbody>
            </table>
        </div>
    </div>

    <div id="tab-keluar" class="tab-item hidden space-y-4 pb-20">
        <div class="bg-white p-5 rounded-2xl shadow-sm">
            <h2 class="font-black mb-4 text-orange-600 uppercase text-sm">Input Pengeluaran Cabang</h2>
            <div class="flex flex-col gap-2">
                <input type="text" id="expNote" placeholder="KEPERLUAN..." class="bg-gray-50 p-4 rounded-xl font-bold uppercase outline-none focus:ring-2 ring-orange-200">
                <input type="number" id="expAmount" placeholder="NOMINAL (RP)..." class="bg-gray-50 p-4 rounded-xl font-black text-red-600 outline-none focus:ring-2 ring-orange-200">
                <button onclick="tambahPengeluaran()" class="bg-orange-600 text-white font-black py-4 rounded-xl shadow-lg uppercase mt-2">Simpan Biaya</button>
            </div>
        </div>
        <div id="table-pengeluaran" class="space-y-2"></div>
    </div>

    <div id="tab-set" class="tab-item hidden space-y-4 pb-20">
        <div class="bg-white p-5 rounded-2xl shadow-sm">
            <h2 class="font-black mb-4 text-blue-800 border-b pb-2 uppercase text-xs">Konfigurasi Cabang</h2>
            <div class="space-y-2">
                <input type="text" id="set-toko" placeholder="Nama Cabang (Contoh: Cabang A)" class="w-full bg-gray-50 p-3 rounded-xl font-bold uppercase outline-none">
                <textarea id="set-alamat" placeholder="Alamat & Kontak Cabang" class="w-full bg-gray-50 p-3 rounded-xl font-bold h-20 uppercase outline-none"></textarea>
                <input type="text" id="set-bank" placeholder="Info Rekening" class="w-full bg-gray-50 p-3 rounded-xl font-bold text-blue-700 uppercase text-xs outline-none">
                <input type="text" id="set-gscript" placeholder="URL Google Script Owner" class="w-full bg-gray-50 p-3 rounded-xl font-mono text-[10px] outline-none border border-blue-100">
                <button onclick="saveProfil()" class="w-full bg-blue-600 text-white py-3 rounded-xl font-black uppercase shadow-md">Simpan Konfigurasi</button>
            </div>
        </div>
        <div class="bg-white p-5 rounded-2xl shadow-sm">
            <h3 class="font-black text-[10px] mb-3 uppercase text-gray-400">Master Produk:</h3>
            <div id="set-produk-list" class="space-y-2 mb-4"></div>
            <div class="grid grid-cols-2 gap-2">
                <button onclick="tambahBarisProduk()" class="bg-emerald-50 text-emerald-600 py-3 rounded-xl font-black text-xs uppercase">+ Barang</button>
                <button onclick="saveProdukMaster()" class="bg-emerald-600 text-white py-3 rounded-xl font-black text-xs uppercase shadow-md">Simpan Harga</button>
            </div>
        </div>
        <div class="bg-white p-5 rounded-2xl shadow-sm space-y-3">
            <p class="text-[10px] font-black text-gray-400 uppercase">Backup & Restore Cabang:</p>
            <div class="grid grid-cols-2 gap-2">
                <button onclick="exportData()" class="bg-slate-100 text-slate-700 p-3 rounded-xl font-bold text-[10px] uppercase">Backup JSON</button>
                <label class="bg-slate-100 text-center text-slate-700 p-3 rounded-xl font-bold text-[10px] uppercase cursor-pointer">Restore JSON <input type="file" onchange="importData(event)" class="hidden"></label>
            </div>
            <button onclick="resetApp()" class="w-full bg-red-50 text-red-500 py-3 rounded-xl font-black text-[10px] uppercase border border-red-100">Reset Aplikasi</button>
        </div>
    </div>
</div>

<nav class="fixed bottom-0 left-0 right-0 bg-white border-t flex justify-around items-center h-16 shadow-lg no-print z-40 max-w-md mx-auto">
    <button onclick="switchTab('jual')" id="nav-jual" class="flex flex-col items-center justify-center flex-1 h-full text-gray-400">
        <span class="text-xl"></span><span class="text-[9px] font-black uppercase mt-1">Jual</span>
    </button>
    <button onclick="switchTab('laporan')" id="nav-laporan" class="flex flex-col items-center justify-center flex-1 h-full text-gray-400">
        <span class="text-xl"></span><span class="text-[9px] font-black uppercase mt-1">Data</span>
    </button>
    <button onclick="switchTab('keluar')" id="nav-keluar" class="flex flex-col items-center justify-center flex-1 h-full text-gray-400">
        <span class="text-xl"></span><span class="text-[9px] font-black uppercase mt-1">Biaya</span>
    </button>
    <button onclick="switchTab('set')" id="nav-set" class="flex flex-col items-center justify-center flex-1 h-full text-gray-400">
        <span class="text-xl"></span><span class="text-[9px] font-black uppercase mt-1">Atur</span>
    </button>
</nav>

<div id="modal-bayar" class="fixed inset-0 bg-slate-900/90 hidden flex items-center justify-center p-4 z-50 no-print">
    <div class="bg-white p-6 rounded-3xl w-full max-w-xs text-center">
        <h3 class="font-black text-gray-400 mb-2 uppercase text-[10px]">Input Pembayaran</h3>
        <input type="number" id="input-nominal" class="w-full border-b-4 border-blue-500 p-4 text-4xl font-black rounded-lg mb-6 outline-none text-center text-blue-600 bg-gray-50">
        <div class="grid grid-cols-2 gap-3">
            <button onclick="tutupModal()" class="bg-gray-100 py-4 rounded-xl font-black text-xs uppercase text-gray-500">Batal</button>
            <button onclick="simpanBayar()" class="bg-blue-600 text-white py-4 rounded-xl font-black shadow-lg text-xs uppercase">Simpan</button>
        </div>
    </div>
</div>

<div id="print-area" class="print-only p-4 bg-white text-black font-mono text-[10px]">
    <div class="text-center border-b border-black pb-2 mb-2">
        <h1 id="p-toko" class="text-sm font-bold uppercase"></h1>
        <p id="p-alamat-toko" class="whitespace-pre-line text-[8px] uppercase font-bold"></p>
    </div>
    <div class="mb-2">
        <p>Tgl : <span id="p-tgl"></span></p>
        <p>Nama: <span id="p-nama" class="font-bold uppercase"></span></p>
        <p id="p-p-alamat" class="uppercase text-[8px] font-bold"></p>
    </div>
    <table class="w-full border-t border-b border-black border-dotted my-1">
        <tbody id="p-items"></tbody>
    </table>
    <div class="text-right mt-2 font-bold text-[11px]">
        <p>TOTAL : Rp <span id="p-total"></span></p>
        <p>BAYAR : Rp <span id="p-paid"></span></p>
        <p class="border-t border-black inline-block mt-1 pt-1">SISA : Rp <span id="p-sisa"></span></p>
    </div>
    <div class="mt-4 text-center border-t border-dotted border-black pt-2 uppercase">
        <p id="p-bank" class="text-[8px] font-bold"></p>
        <p class="mt-2 italic">Terima Kasih</p>
    </div>
</div>

<script>
    // Konfigurasi Default
    let masterProduk = JSON.parse(localStorage.getItem('pos_p')) || [{name:'Ayam Potong', price:35000}];
    let profil = JSON.parse(localStorage.getItem('pos_s')) || {toko:'MBOK SANI', bank:'BANK ABC', alamat:'ALAMAT', gscript: ''};
    let trx = JSON.parse(localStorage.getItem('pos_t')) || [];
    let expenses = JSON.parse(localStorage.getItem('pos_e')) || [];
    let curIdx = null;

    setInterval(() => { 
        document.getElementById('clock').innerText = new Date().toLocaleString('id-ID', {dateStyle:'medium', timeStyle:'short'}); 
    }, 1000);

    function switchTab(id) {
        document.querySelectorAll('.tab-item').forEach(t => t.classList.add('hidden'));
        document.querySelectorAll('nav button').forEach(b => b.classList.remove('nav-active'));
        document.getElementById('tab-'+id).classList.remove('hidden');
        document.getElementById('nav-'+id).classList.add('nav-active');
        if(id === 'laporan') renderLaporan();
        if(id === 'keluar') renderPengeluaran();
        if(id === 'jual') renderKatalog();
        if(id === 'set') renderSetting();
        document.getElementById('display-nama-toko').innerText = profil.toko;
        document.getElementById('label-toko').innerText = profil.alamat.split('\n')[0];
    }

    function renderKatalog() {
        document.getElementById('check-produk').innerHTML = masterProduk.map((p, i) => `
            <div class="flex items-center justify-between bg-white p-3 rounded-2xl border border-gray-100 shadow-sm transition">
                <div class="flex items-center gap-3 flex-1" onclick="toggleCek(${i})">
                    <input type="checkbox" class="p-cek w-5 h-5 accent-blue-600 rounded" data-idx="${i}" onclick="event.stopPropagation()">
                    <div class="flex flex-col">
                        <span class="font-black text-slate-700 uppercase text-[11px] leading-tight">${p.name}</span>
                        <span class="text-[10px] text-blue-600 font-bold">Rp ${p.price.toLocaleString()}</span>
                    </div>
                </div>
                <div class="flex items-center bg-gray-50 rounded-xl p-1 gap-1 border">
                    <button onclick="changeQty(${i}, -1)" class="w-7 h-7 font-black text-gray-400">-</button>
                    <input type="number" value="1" min="1" onchange="updateCart()" class="p-qty w-7 bg-transparent text-center font-black text-xs" data-price="${p.price}" data-name="${p.name}">
                    <button onclick="changeQty(${i}, 1)" class="w-7 h-7 font-black text-blue-600">+</button>
                </div>
            </div>`).join('');
    }

    function toggleCek(i) { const c = document.querySelectorAll('.p-cek')[i]; c.checked = !c.checked; updateCart(); }
    function changeQty(idx, delta) { const input = document.querySelectorAll('.p-qty')[idx]; input.value = Math.max(1, parseInt(input.value) + delta); updateCart(); }
    function updateCart() {
        let total = 0;
        document.querySelectorAll('.p-cek').forEach((c, i) => { 
            if(c.checked) total += (parseInt(document.querySelectorAll('.p-qty')[i].value) * parseInt(document.querySelectorAll('.p-qty')[i].dataset.price)); 
        });
        document.getElementById('total-tagihan').innerText = total.toLocaleString();
    }

    // SINKRONISASI KE GOOGLE SHEETS DENGAN IDENTITAS CABANG
    async function syncToGoogleSheet(data) {
        if(!profil.gscript) return;
        data.cabang = profil.toko; // Menambahkan info cabang ke setiap pengiriman
        try {
            await fetch(profil.gscript, {
                method: 'POST',
                mode: 'no-cors',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(data)
            });
        } catch (e) { console.error('G-Sheet Error:', e); }
    }

    function simpanDanCetak() {
        const nama = document.getElementById('custName').value.trim().toUpperCase() || "UMUM";
        const alamat = document.getElementById('custAddr').value.trim().toUpperCase();
        const items = [];
        const ceks = document.querySelectorAll('.p-cek');
        const qtys = document.querySelectorAll('.p-qty');
        ceks.forEach((c, i) => { if(c.checked) { const q = qtys[i]; items.push({name: q.dataset.name, qty: q.value, sub: q.value * q.dataset.price, p: q.dataset.price}); } });
        if(items.length === 0) return alert('Pilih barang!');

        const obj = { type: 'TRANSAKSI', id: Date.now(), tgl: new Date().toLocaleString('id-ID'), nama: nama, alamat: alamat, items: items, total: items.reduce((a, b) => a + b.sub, 0), paid: 0 };
        trx.push(obj); 
        localStorage.setItem('pos_t', JSON.stringify(trx));
        syncToGoogleSheet(obj);
        siapkanKertas(obj);
        document.getElementById('custName').value = ''; document.getElementById('custAddr').value = '';
        ceks.forEach(c => c.checked = false); qtys.forEach(q => q.value = 1); updateCart();
        setTimeout(() => { window.print(); }, 500);
    }

    function siapkanKertas(d) {
        document.getElementById('p-toko').innerText = profil.toko;
        document.getElementById('p-alamat-toko').innerText = profil.alamat;
        document.getElementById('p-nama').innerText = d.nama;
        document.getElementById('p-p-alamat').innerText = d.alamat ? "Info: " + d.alamat : "";
        document.getElementById('p-tgl').innerText = d.tgl;
        document.getElementById('p-bank').innerText = profil.bank;
        document.getElementById('p-total').innerText = d.total.toLocaleString();
        document.getElementById('p-paid').innerText = d.paid.toLocaleString();
        document.getElementById('p-sisa').innerText = (d.total - d.paid).toLocaleString();
        document.getElementById('p-items').innerHTML = d.items.map(it => `<tr><td>${it.name} x${it.qty}</td><td class="text-right">${it.sub.toLocaleString()}</td></tr>`).join('');
    }

    function renderLaporan() {
        let piutang = 0; let omzet = 0; let rekapMap = {};
        trx.forEach(r => { const sisa = r.total - r.paid; piutang += sisa; omzet += r.paid; if(sisa > 0) rekapMap[r.nama] = (rekapMap[r.nama] || 0) + sisa; });
        const rekapDiv = document.getElementById('rekap-pelanggan');
        const keys = Object.keys(rekapMap);
        if(keys.length > 0) {
            rekapDiv.classList.remove('hidden');
            document.getElementById('rekap-list').innerHTML = keys.map(name => `<div class="flex justify-between border-b border-amber-200 py-1"><span>${name}</span><span class="text-red-600">Rp ${rekapMap[name].toLocaleString()}</span></div>`).join('');
        } else { rekapDiv.classList.add('hidden'); }
        const totalBeban = expenses.reduce((a, b) => a + b.amt, 0);
        document.getElementById('stat-piutang').innerText = "Rp " + piutang.toLocaleString();
        document.getElementById('stat-laba').innerText = "Rp " + (omzet - totalBeban).toLocaleString();
        document.getElementById('histori-table').innerHTML = [...trx].reverse().map(r => `
            <tr class="border-b">
                <td class="p-3"><span class="text-blue-700 font-black uppercase text-[10px]">${r.nama}</span><br><span class="text-[8px] text-gray-400 italic">${r.tgl}</span></td>
                <td class="p-3 text-right">Rp ${r.total.toLocaleString()}<br><span class="text-[9px] ${r.total - r.paid > 0 ? 'text-red-500' : 'text-green-500'}">Sisa: ${(r.total - r.paid).toLocaleString()}</span></td>
                <td class="p-3 text-center flex justify-center gap-1">
                    <button onclick="bukaBayar(${r.id})" class="bg-blue-600 text-white px-2 py-2 rounded-lg text-[8px] font-black uppercase">BAYAR</button>
                    <button onclick="hapusTrx(${r.id})" class="text-gray-300 px-1 font-black">X</button>
                </td>
            </tr>`).join('');
    }

    function bukaBayar(id) { curIdx = trx.findIndex(t => t.id === id); document.getElementById('modal-bayar').classList.remove('hidden'); document.getElementById('input-nominal').value = trx[curIdx].total - trx[curIdx].paid; }
    function tutupModal() { document.getElementById('modal-bayar').classList.add('hidden'); }
    function simpanBayar() {
        const val = parseInt(document.getElementById('input-nominal').value) || 0;
        trx[curIdx].paid += val; 
        localStorage.setItem('pos_t', JSON.stringify(trx));
        syncToGoogleSheet({type: 'PEMBAYARAN', id: trx[curIdx].id, nominal: val, totalPaid: trx[curIdx].paid});
        tutupModal(); renderLaporan(); siapkanKertas(trx[curIdx]);
        setTimeout(() => { window.print(); }, 500);
    }

    function tambahPengeluaran() {
        const note = document.getElementById('expNote').value.trim().toUpperCase();
        const amt = parseInt(document.getElementById('expAmount').value) || 0;
        if(!note || amt <= 0) return alert('Isi data biaya!');
        const dataBiaya = { type: 'BIAYA', id: Date.now(), tgl: new Date().toLocaleDateString('id-ID'), note: note, amt: amt };
        expenses.push(dataBiaya);
        localStorage.setItem('pos_e', JSON.stringify(expenses));
        syncToGoogleSheet(dataBiaya);
        document.getElementById('expNote').value = ''; document.getElementById('expAmount').value = ''; 
        renderPengeluaran();
        alert('Biaya Cabang Disimpan');
    }

    function renderPengeluaran() {
        document.getElementById('table-pengeluaran').innerHTML = [...expenses].reverse().map(e => `
            <div class="bg-white p-4 rounded-2xl flex justify-between items-center shadow-sm uppercase border-l-4 border-orange-500">
                <div><p class="text-[8px] text-gray-400 font-black">${e.tgl}</p><p class="text-[10px] font-black">${e.note}</p></div>
                <div class="text-right flex items-center gap-4"><p class="font-black text-red-600 text-xs">Rp ${e.amt.toLocaleString()}</p><button onclick="hapusExp(${e.id})" class="text-gray-300 font-bold text-xs">X</button></div>
            </div>`).join('');
    }

    function renderSetting() {
        document.getElementById('set-toko').value = profil.toko;
        document.getElementById('set-bank').value = profil.bank;
        document.getElementById('set-alamat').value = profil.alamat;
        document.getElementById('set-gscript').value = profil.gscript || '';
        document.getElementById('set-produk-list').innerHTML = masterProduk.map((p, i) => `
            <div class="flex gap-1 mb-1 items-center">
                <input type="text" value="${p.name}" class="p-name bg-gray-50 p-3 rounded-xl flex-1 text-xs uppercase font-black border">
                <input type="number" value="${p.price}" class="p-price bg-gray-50 p-3 rounded-xl w-24 text-xs font-black text-right border">
                <button onclick="this.parentElement.remove()" class="text-red-400 px-2 font-black">�</button>
            </div>`).join('');
    }

    function tambahBarisProduk() {
        const div = document.createElement('div'); div.className = "flex gap-1 mb-1 items-center";
        div.innerHTML = `<input type="text" placeholder="BARANG" class="p-name bg-gray-50 p-3 rounded-xl flex-1 text-xs font-black uppercase border"><input type="number" placeholder="HARGA" class="p-price bg-gray-50 p-3 rounded-xl w-24 text-xs text-right font-black border"><button onclick="this.parentElement.remove()" class="text-red-400 px-2 font-black">�</button>`;
        document.getElementById('set-produk-list').appendChild(div);
    }

    function saveProfil() { 
        profil = { toko: document.getElementById('set-toko').value.toUpperCase(), bank: document.getElementById('set-bank').value.toUpperCase(), alamat: document.getElementById('set-alamat').value.toUpperCase(), gscript: document.getElementById('set-gscript').value.trim() }; 
        localStorage.setItem('pos_s', JSON.stringify(profil)); 
        alert('Pengaturan Cabang Berhasil!'); 
        switchTab('jual');
    }

    function saveProdukMaster() {
        const n = document.querySelectorAll('.p-name'); const p = document.querySelectorAll('.p-price');
        masterProduk = []; n.forEach((it, i) => { if(it.value) masterProduk.push({name: it.value.toUpperCase(), price: parseInt(p[i].value) || 0}); });
        localStorage.setItem('pos_p', JSON.stringify(masterProduk)); alert('Produk Disimpan!'); renderKatalog();
    }

    function exportData() { 
        const b = { trx, profil, produk: masterProduk, expenses }; 
        const a = document.createElement('a'); a.href = URL.createObjectURL(new Blob([JSON.stringify(b)], {type: "application/json"})); a.download = 'backup_'+profil.toko+'.json'; a.click(); 
    }

    function importData(e) { 
        const r = new FileReader(); r.onload = (ev) => { 
            const d = JSON.parse(ev.target.result); 
            if(confirm('Impor data? Data lama di HP ini akan hilang.')) {
                trx = d.trx || []; expenses = d.expenses || []; profil = d.profil || profil; masterProduk = d.produk || masterProduk;
                localStorage.setItem('pos_t', JSON.stringify(trx)); localStorage.setItem('pos_e', JSON.stringify(expenses));
                localStorage.setItem('pos_s', JSON.stringify(profil)); localStorage.setItem('pos_p', JSON.stringify(masterProduk));
                location.reload(); 
            }
        }; 
        r.readAsText(e.target.files[0]); 
    }

    function resetApp() { if(confirm('RESET SEMUA DATA?')) { localStorage.clear(); location.reload(); } }
    function hapusExp(id) { if(confirm('Hapus biaya?')) { expenses = expenses.filter(e => e.id !== id); localStorage.setItem('pos_e', JSON.stringify(expenses)); renderPengeluaran(); } }
    function hapusTrx(id) { if(confirm('Hapus transaksi?')) { trx = trx.filter(t => t.id !== id); localStorage.setItem('pos_t', JSON.stringify(trx)); renderLaporan(); } }

    switchTab('jual');
</script>
</body>
</html>
